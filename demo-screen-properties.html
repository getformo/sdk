<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formo SDK - Screen Properties Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-top: 0;
        }
        h2 {
            color: #555;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        .property-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .property-card {
            background: #f9f9f9;
            border-left: 4px solid #4CAF50;
            padding: 15px;
            border-radius: 4px;
        }
        .property-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }
        .property-value {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        .property-description {
            font-size: 14px;
            color: #888;
            margin-top: 5px;
        }
        .event-payload {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 13px;
        }
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        .comparison-table th {
            background: #4CAF50;
            color: white;
            font-weight: 600;
        }
        .comparison-table tr:hover {
            background: #f5f5f5;
        }
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
        }
        .badge-success {
            background: #4CAF50;
            color: white;
        }
        .badge-info {
            background: #2196F3;
            color: white;
        }
        .insight-box {
            background: #e3f2fd;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .insight-box h3 {
            margin-top: 0;
            color: #1976d2;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            background: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üñ•Ô∏è Formo SDK - Screen Properties</h1>
        <p>This demo shows the screen properties that are now automatically collected by the Formo Analytics SDK.</p>

        <h2>Your Current Screen Properties</h2>
        <div class="property-grid">
            <div class="property-card">
                <div class="property-label">Screen Width</div>
                <div class="property-value" id="screenWidth">-</div>
                <div class="property-description">Total display width in pixels</div>
            </div>
            <div class="property-card">
                <div class="property-label">Screen Height</div>
                <div class="property-value" id="screenHeight">-</div>
                <div class="property-description">Total display height in pixels</div>
            </div>
            <div class="property-card">
                <div class="property-label">Pixel Density</div>
                <div class="property-value" id="density">-</div>
                <div class="property-description">Device pixel ratio (DPR)</div>
            </div>
            <div class="property-card">
                <div class="property-label">Viewport Width</div>
                <div class="property-value" id="innerWidth">-</div>
                <div class="property-description">Browser window width</div>
            </div>
            <div class="property-card">
                <div class="property-label">Viewport Height</div>
                <div class="property-value" id="innerHeight">-</div>
                <div class="property-description">Browser window height</div>
            </div>
            <div class="property-card">
                <div class="property-label">Device Type</div>
                <div class="property-value" id="deviceType">-</div>
                <div class="property-description">Inferred from dimensions</div>
            </div>
        </div>

        <div class="insight-box">
            <h3>üí° Key Insights</h3>
            <ul id="insights">
                <li>Loading...</li>
            </ul>
        </div>

        <h2>Comparison with Industry Standards</h2>
        <table class="comparison-table">
            <thead>
                <tr>
                    <th>Property</th>
                    <th>RudderStack</th>
                    <th>Segment</th>
                    <th>Formo <span class="badge badge-success">New</span></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>width</strong></td>
                    <td>‚úÖ</td>
                    <td>‚úÖ</td>
                    <td>‚úÖ</td>
                </tr>
                <tr>
                    <td><strong>height</strong></td>
                    <td>‚úÖ</td>
                    <td>‚úÖ</td>
                    <td>‚úÖ</td>
                </tr>
                <tr>
                    <td><strong>density</strong></td>
                    <td>‚úÖ</td>
                    <td>‚úÖ</td>
                    <td>‚úÖ</td>
                </tr>
                <tr>
                    <td><strong>innerWidth</strong> <span class="badge badge-info">Enhanced</span></td>
                    <td>‚ùå</td>
                    <td>‚ùå</td>
                    <td>‚úÖ</td>
                </tr>
                <tr>
                    <td><strong>innerHeight</strong> <span class="badge badge-info">Enhanced</span></td>
                    <td>‚ùå</td>
                    <td>‚ùå</td>
                    <td>‚úÖ</td>
                </tr>
            </tbody>
        </table>

        <h2>Sample Event Payload</h2>
        <p>When you send an event with the Formo SDK, the screen properties are automatically included in the context:</p>
        <pre class="event-payload" id="eventPayload">Loading...</pre>

        <h2>Try It Out</h2>
        <button onclick="updateScreenInfo()">üîÑ Refresh Screen Info</button>
        <button onclick="window.open('', '', 'width=800,height=600')">üì± Open Small Window</button>
        <button onclick="window.open('', '', 'width=1920,height=1080')">üñ•Ô∏è Open Large Window</button>
    </div>

    <script>
        function getScreenProperties() {
            return {
                width: window.screen?.width || 0,
                height: window.screen?.height || 0,
                density: window.devicePixelRatio || 1,
                innerWidth: window.innerWidth || 0,
                innerHeight: window.innerHeight || 0,
            };
        }

        function inferDeviceType(screen) {
            const { innerWidth, density } = screen;
            
            if (innerWidth < 768) return 'Mobile';
            if (innerWidth < 1024) return 'Tablet';
            if (density >= 2) return 'Retina Display';
            return 'Desktop';
        }

        function generateInsights(screen) {
            const insights = [];
            
            // Screen utilization
            const widthUtil = ((screen.innerWidth / screen.width) * 100).toFixed(1);
            const heightUtil = ((screen.innerHeight / screen.height) * 100).toFixed(1);
            insights.push(`Your browser window uses ${widthUtil}% of screen width and ${heightUtil}% of screen height`);

            // Pixel density
            if (screen.density >= 2) {
                insights.push(`You have a high-DPI display (${screen.density}x) - great for viewing sharp images!`);
            } else {
                insights.push(`You have a standard-DPI display (${screen.density}x)`);
            }

            // Fullscreen detection
            if (screen.innerWidth === screen.width && screen.innerHeight >= screen.height - 100) {
                insights.push('You appear to be in fullscreen or maximized window mode');
            } else {
                insights.push('You are viewing this in a windowed browser (not fullscreen)');
            }

            // Responsive breakpoint
            if (screen.innerWidth < 768) {
                insights.push('You would see the mobile layout on most responsive websites');
            } else if (screen.innerWidth < 1024) {
                insights.push('You would see the tablet layout on most responsive websites');
            } else {
                insights.push('You would see the desktop layout on most responsive websites');
            }

            return insights;
        }

        function updateScreenInfo() {
            const screen = getScreenProperties();
            
            // Update display values
            document.getElementById('screenWidth').textContent = screen.width + 'px';
            document.getElementById('screenHeight').textContent = screen.height + 'px';
            document.getElementById('density').textContent = screen.density + 'x';
            document.getElementById('innerWidth').textContent = screen.innerWidth + 'px';
            document.getElementById('innerHeight').textContent = screen.innerHeight + 'px';
            document.getElementById('deviceType').textContent = inferDeviceType(screen);

            // Update insights
            const insights = generateInsights(screen);
            const insightsList = document.getElementById('insights');
            insightsList.innerHTML = insights.map(insight => `<li>${insight}</li>`).join('');

            // Update event payload
            const eventPayload = {
                type: 'page',
                anonymous_id: '550e8400-e29b-41d4-a716-446655440000',
                user_id: null,
                address: null,
                channel: 'web',
                version: '1.0.0',
                original_timestamp: new Date().toISOString(),
                context: {
                    user_agent: navigator.userAgent,
                    locale: navigator.language,
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                    page_path: window.location.pathname,
                    page_title: document.title,
                    page_url: window.location.href,
                    library_name: 'Formo Web SDK',
                    library_version: '1.22.0',
                    browser: 'chrome',
                    screen: screen
                },
                properties: {
                    url: window.location.href,
                    path: window.location.pathname,
                    hash: window.location.hash
                }
            };

            document.getElementById('eventPayload').textContent = JSON.stringify(eventPayload, null, 2);
        }

        // Update on load
        updateScreenInfo();

        // Update on resize
        window.addEventListener('resize', updateScreenInfo);
    </script>
</body>
</html>

